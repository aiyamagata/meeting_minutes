# Slack投稿エラー解決ガイド

## 🔴 エラー: `channel_not_found`

### 原因

`channel_not_found` エラーは、以下のいずれかが原因です：

1. **チャンネルが存在しない**
   - チャンネル名が間違っている
   - チャンネルが削除されている

2. **Botがチャンネルに追加されていない**
   - Botをチャンネルに招待していない
   - Botにチャンネルへのアクセス権限がない

3. **チャンネル名の表記が間違っている**
   - 大文字小文字が違う
   - 全角半角が違う
   - `#` の有無が違う

---

## ✅ 解決方法

### ステップ1: チャンネルが存在するか確認

1. Slackでチャンネル一覧を確認
2. `#議事録` チャンネルが存在するか確認
3. 存在しない場合は、チャンネルを作成するか、既存のチャンネル名を使用

### ステップ2: Botをチャンネルに追加

**方法A: SlackのUIから追加**

1. `#議事録` チャンネルを開く
2. チャンネル名をクリック
3. 「統合」タブを選択
4. 「アプリを追加」をクリック
5. 作成したBot（例: `Meeting Minutes Bot`）を検索して追加

**方法B: チャンネルでコマンドを実行**

1. `#議事録` チャンネルを開く
2. チャンネルで以下を入力：
   ```
   /invite @Bot名
   ```
   例: `/invite @Meeting Minutes Bot`

### ステップ3: チャンネル名を確認

**正しいチャンネル名の形式**:
- `#議事録` ✅（`#` を含む）
- `議事録` ❌（`#` がない）

**注意点**:
- チャンネル名は大文字小文字を区別します
- 全角と半角も区別されます
- スペースも含めて正確に一致させる必要があります

### ステップ4: 設定ファイルを確認

`config/config.json` の `channel` が正しいか確認：

```json
{
  "slack": {
    "channel": "#議事録"  // ← これが実際のチャンネル名と一致しているか
  }
}
```

---

## 🔍 チャンネル一覧を確認する方法

### 方法1: SlackのUIから確認

1. Slackの左サイドバーでチャンネル一覧を確認
2. チャンネル名を正確にコピー

### 方法2: APIで確認（上級者向け）

```python
import requests

token = "xoxb-your-bot-token"
headers = {"Authorization": f"Bearer {token}"}
response = requests.get("https://slack.com/api/conversations.list", headers=headers)
channels = response.json()["channels"]

for channel in channels:
    print(f"#{channel['name']} (ID: {channel['id']})")
```

---

## 📝 よくある間違い

### 間違い1: チャンネル名に `#` がない

```json
// ❌ 間違い
"channel": "議事録"

// ✅ 正しい
"channel": "#議事録"
```

### 間違い2: チャンネル名が大文字小文字で違う

```json
// ❌ 間違い（チャンネル名が「議事録」の場合）
"channel": "#ギジロク"

// ✅ 正しい
"channel": "#議事録"
```

### 間違い3: Botをチャンネルに追加していない

- Bot Tokenがあっても、Botをチャンネルに追加していないと投稿できません
- 必ずBotをチャンネルに招待してください

---

## 🧪 動作確認

修正後、再度テスト実行：

```bash
python python/main.py --test
```

**成功の確認**:
- `Slack投稿に失敗しました: channel_not_found` が表示されない
- `Slackにメッセージを投稿しました: #議事録` と表示される
- 実際にSlackチャンネルにメッセージが投稿される

---

## 💡 ヒント

- **チャンネルIDを使用する方法**: チャンネル名の代わりにチャンネルIDを使用することもできます
  - 例: `"channel": "C1234567890"`（チャンネルID）
  - チャンネルIDは、チャンネル名をクリック → 「詳細」→ URLから取得できます

- **プライベートチャンネルの場合**: プライベートチャンネルでも同じ手順でBotを追加できます

